{
  "version": 3,
  "sources": ["../src/effect.ts", "../../shared/src/index.ts", "../src/reactiveEffect.ts", "../src/baseHandlers.ts", "../src/reactive.ts"],
  "sourcesContent": ["export function effect(fn, options?) {\r\n  const _effect = new ReactiveEffect(fn, () => {\r\n    _effect.run();\r\n  });\r\n  _effect.run();\r\n}\r\n\r\nclass ReactiveEffect {\r\n  active = true;\r\n  constructor(public fn, public scheduler) {}\r\n  run() {\r\n    if (!this.active) {\r\n      return this.fn();\r\n    }\r\n    try {\r\n      this.fn();\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n}\r\n", "export function isObject(value) {\r\n  return typeof value === \"object\" && value !== null;\r\n}\r\n", "const targetMap = new WeakMap();\r\n\r\n//\u6536\u96C6\u4F9D\u8D56\r\nexport function track(target, key) {\r\n  let depsMap = targetMap.get(target); //\u5224\u65AD\u6709\u6CA1\u6709\u4F9D\u8D56\r\n  if (!depsMap) {\r\n    targetMap.set(target, (depsMap = new Map()));\r\n  }\r\n\r\n  let dep = depsMap.get(key);\r\n  if (!dep) {\r\n    depsMap.set(key, (dep = new Map()));\r\n  }\r\n  console.log(\"track\", key, targetMap, depsMap, dep);\r\n}\r\n", "import { track } from \"./reactiveEffect\";\r\n\r\nexport enum ReactiveFlags {\r\n  IS_REACTIVE = \"__v_isReactive\",\r\n}\r\n\r\nexport const baseHandlers = {\r\n  get(target, key, receiver) {\r\n    console.log(\"get\");\r\n    if (key === ReactiveFlags.IS_REACTIVE) return true;\r\n    //\u6536\u96C6\u4F9D\u8D56\r\n    track(target, key);\r\n    return Reflect.get(target, key, receiver);\r\n  },\r\n\r\n  set(target, key, value, receiver) {\r\n    console.log(\"set\");\r\n    return Reflect.set(target, key, value, receiver);\r\n  },\r\n};\r\n", "import { isObject } from \"@vue/shared\";\r\nimport { baseHandlers, ReactiveFlags } from \"./baseHandlers\";\r\n\r\nconst cacheProxyMap = new WeakMap();\r\n\r\nexport function reactive(value) {\r\n  //\u5224\u65AD\u5BF9\u8C61\u7C7B\u578B \u975E\u7A7A\r\n  if (!isObject(value)) {\r\n    return value;\r\n  }\r\n  return createProxyObject(value);\r\n}\r\n\r\nexport function createProxyObject(value) {\r\n  const existProxy = cacheProxyMap.get(value);\r\n  if (existProxy) {\r\n    return existProxy;\r\n  }\r\n\r\n  if (value[ReactiveFlags.IS_REACTIVE]) {\r\n    return value;\r\n  }\r\n\r\n  const proxy = new Proxy(value, baseHandlers);\r\n  cacheProxyMap.set(value, proxy);\r\n  return proxy;\r\n}\r\n"],
  "mappings": ";AAAO,SAAS,OAAO,IAAI,SAAU;AACnC,QAAM,UAAU,IAAI,eAAe,IAAI,MAAM;AAC3C,YAAQ,IAAI;AAAA,EACd,CAAC;AACD,UAAQ,IAAI;AACd;AAEA,IAAM,iBAAN,MAAqB;AAAA,EAEnB,YAAmB,IAAW,WAAW;AAAtB;AAAW;AAD9B,kBAAS;AAAA,EACiC;AAAA,EAC1C,MAAM;AACJ,QAAI,CAAC,KAAK,QAAQ;AAChB,aAAO,KAAK,GAAG;AAAA,IACjB;AACA,QAAI;AACF,WAAK,GAAG;AAAA,IACV,SAAS,OAAO;AACd,cAAQ,MAAM,KAAK;AAAA,IACrB;AAAA,EACF;AACF;;;ACpBO,SAAS,SAAS,OAAO;AAC9B,SAAO,OAAO,UAAU,YAAY,UAAU;AAChD;;;ACFA,IAAM,YAAY,oBAAI,QAAQ;AAGvB,SAAS,MAAM,QAAQ,KAAK;AACjC,MAAI,UAAU,UAAU,IAAI,MAAM;AAClC,MAAI,CAAC,SAAS;AACZ,cAAU,IAAI,QAAS,UAAU,oBAAI,IAAI,CAAE;AAAA,EAC7C;AAEA,MAAI,MAAM,QAAQ,IAAI,GAAG;AACzB,MAAI,CAAC,KAAK;AACR,YAAQ,IAAI,KAAM,MAAM,oBAAI,IAAI,CAAE;AAAA,EACpC;AACA,UAAQ,IAAI,SAAS,KAAK,WAAW,SAAS,GAAG;AACnD;;;ACRO,IAAM,eAAe;AAAA,EAC1B,IAAI,QAAQ,KAAK,UAAU;AACzB,YAAQ,IAAI,KAAK;AACjB,QAAI,QAAQ,mCAA2B,QAAO;AAE9C,UAAM,QAAQ,GAAG;AACjB,WAAO,QAAQ,IAAI,QAAQ,KAAK,QAAQ;AAAA,EAC1C;AAAA,EAEA,IAAI,QAAQ,KAAK,OAAO,UAAU;AAChC,YAAQ,IAAI,KAAK;AACjB,WAAO,QAAQ,IAAI,QAAQ,KAAK,OAAO,QAAQ;AAAA,EACjD;AACF;;;AChBA,IAAM,gBAAgB,oBAAI,QAAQ;AAE3B,SAAS,SAAS,OAAO;AAE9B,MAAI,CAAC,SAAS,KAAK,GAAG;AACpB,WAAO;AAAA,EACT;AACA,SAAO,kBAAkB,KAAK;AAChC;AAEO,SAAS,kBAAkB,OAAO;AACvC,QAAM,aAAa,cAAc,IAAI,KAAK;AAC1C,MAAI,YAAY;AACd,WAAO;AAAA,EACT;AAEA,MAAI,wCAA+B,GAAG;AACpC,WAAO;AAAA,EACT;AAEA,QAAM,QAAQ,IAAI,MAAM,OAAO,YAAY;AAC3C,gBAAc,IAAI,OAAO,KAAK;AAC9B,SAAO;AACT;",
  "names": []
}
